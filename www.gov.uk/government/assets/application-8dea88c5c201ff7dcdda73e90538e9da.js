function UnobtrusiveMap(a){var b=this,c=a.href,d=c.match(/(-?\d+\.\d+),(-?\d+\.\d+)/),e={zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};b.map_canvas=jQuery('<div class="map_canvas"></div>'),jQuery(a).after(b.map_canvas),b.map=new google.maps.Map(b.map_canvas[0],e),b.addMarkerAndCenterMap=function(c){b.map.setCenter(c),new google.maps.Marker({map:b.map,position:c}),jQuery(a).hide()},b.displayMapViaGeocoder=function(a,c){c==google.maps.GeocoderStatus.OK?b.addMarkerAndCenterMap(a[0].geometry.location):b.map_canvas.hide()};if(d){var f=d[1],g=d[2],h=new google.maps.LatLng(f,g);b.addMarkerAndCenterMap(h)}else{d=c.match(/q=(.*)/);var i=decodeURIComponent(d[1]),j=new google.maps.Geocoder;j.geocode({address:i},b.displayMapViaGeocoder)}}function onYouTubePlayerReady(a){var b=PlayerDaemon.getPlayer(a),c=document.getElementById(b.config.id);b.init(c)}function playerState(a,b){var c=PlayerDaemon.getPlayer(b);a==1?(c.play(),c.config.buttons.toggle&&c.$html.find(".play").removeClass("play").addClass("pause").text("Pause")):c.config.repeat&&a==0&&c.play()}(function(a,b){var c;a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(b){var c=a('meta[name="csrf-token"]').attr("content");c&&b.setRequestHeader("X-CSRF-Token",c)},fire:function(b,c,d){var e=a.Event(c);return b.trigger(e,d),e.result!==!1},confirm:function(a){return confirm(a)},ajax:function(b){return a.ajax(b)},handleRemote:function(d){var e,f,g,h=d.data("cross-domain")||null,i=d.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType,j;if(c.fire(d,"ajax:before")){if(d.is("form")){e=d.attr("method"),f=d.attr("action"),g=d.serializeArray();var k=d.data("ujs:submit-button");k&&(g.push(k),d.data("ujs:submit-button",null))}else d.is(c.inputChangeSelector)?(e=d.data("method"),f=d.data("url"),g=d.serialize(),d.data("params")&&(g=g+"&"+d.data("params"))):(e=d.data("method"),f=d.attr("href"),g=d.data("params")||null);return j={type:e||"GET",data:g,dataType:i,crossDomain:h,beforeSend:function(a,e){return e.dataType===b&&a.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),c.fire(d,"ajax:beforeSend",[a,e])},success:function(a,b,c){d.trigger("ajax:success",[a,b,c])},complete:function(a,b){d.trigger("ajax:complete",[a,b])},error:function(a,b,c){d.trigger("ajax:error",[a,b,c])}},f&&(j.url=f),c.ajax(j)}return!1},handleMethod:function(c){var d=c.attr("href"),e=c.data("method"),f=c.attr("target"),g=a("meta[name=csrf-token]").attr("content"),h=a("meta[name=csrf-param]").attr("content"),i=a('<form method="post" action="'+d+'"></form>'),j='<input name="_method" value="'+e+'" type="hidden" />';h!==b&&g!==b&&(j+='<input name="'+h+'" value="'+g+'" type="hidden" />'),f&&i.attr("target",f),i.hide().append(j).appendTo("body"),i.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with",b[c]()),b[c](b.data("disable-with")),b.prop("disabled",!0)})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var b=a(this),c=b.is("button")?"html":"val";b.data("ujs:enable-with")&&b[c](b.data("ujs:enable-with")),b.prop("disabled",!1)})},allowAction:function(a){var b=a.data("confirm"),d=!1,e;return b?(c.fire(a,"confirm")&&(d=c.confirm(b),e=c.fire(a,"confirm:complete",[d])),d&&e):!0},blankInputs:function(b,c,d){var e=a(),f,g=c||"input,textarea";return b.find(g).each(function(){f=a(this);if(d?f.val():!f.val())e=e.add(f)}),e.length?e:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(b){return a(b.target).trigger("ujs:everythingStopped"),b.stopImmediatePropagation(),!1},callFormSubmitBindings:function(c,d){var e=c.data("events"),f=!0;return e!==b&&e.submit!==b&&a.each(e.submit,function(a,b){if(typeof b.handler=="function")return f=b.handler(d)}),f},disableElement:function(a){a.data("ujs:enable-with",a.html()),a.html(a.data("disable-with")),a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==b&&(a.html(a.data("ujs:enable-with")),a.data("ujs:enable-with",!1)),a.unbind("click.railsDisable")}},a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),a(document).delegate(c.linkDisableSelector,"ajax:complete",function(){c.enableElement(a(this))}),a(document).delegate(c.linkClickSelector,"click.rails",function(d){var e=a(this),f=e.data("method"),g=e.data("params");if(!c.allowAction(e))return c.stopEverything(d);e.is(c.linkDisableSelector)&&c.disableElement(e);if(e.data("remote")!==b)return(d.metaKey||d.ctrlKey)&&(!f||f==="GET")&&!g?!0:(c.handleRemote(e)===!1&&c.enableElement(e),!1);if(e.data("method"))return c.handleMethod(e),!1}),a(document).delegate(c.inputChangeSelector,"change.rails",function(b){var d=a(this);return c.allowAction(d)?(c.handleRemote(d),!1):c.stopEverything(b)}),a(document).delegate(c.formSubmitSelector,"submit.rails",function(d){var e=a(this),f=e.data("remote")!==b,g=c.blankInputs(e,c.requiredInputSelector),h=c.nonBlankInputs(e,c.fileInputSelector);if(!c.allowAction(e))return c.stopEverything(d);if(g&&e.attr("novalidate")==b&&c.fire(e,"ajax:aborted:required",[g]))return c.stopEverything(d);if(f)return h?c.fire(e,"ajax:aborted:file",[h]):!a.support.submitBubbles&&a().jquery<"1.7"&&c.callFormSubmitBindings(e,d)===!1?c.stopEverything(d):(c.handleRemote(e),!1);setTimeout(function(){c.disableFormElements(e)},13)}),a(document).delegate(c.formInputClickSelector,"click.rails",function(b){var d=a(this);if(!c.allowAction(d))return c.stopEverything(b);var e=d.attr("name"),f=e?{name:e,value:d.val()}:null;d.closest("form").data("ujs:submit-button",f)}),a(document).delegate(c.formSubmitSelector,"ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),a(document).delegate(c.formSubmitSelector,"ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))})})(jQuery),jQuery(document).ready(function(a){a("form").submit(function(){a("input[type=submit]",this).attr("disabled","disabled")})}),jQuery.elemental=function(a,b,c){attributes=[];if(typeof c=="string"){var d,e;if(d=c.match(/(\.)([-\w]+)/))e={"class":d[2]};else if(d=c.match(/(\#)([-\w]+)/))e={id:d[2]};c=e}for(key in c)attributes.push(key+'="'+c[key]+'"');var f=$("<"+a+" "+attributes.join(" ")+" />");return typeof b=="string"?f.text(b):b!=null&&f.append(b),f},jQuery(["div","span","ul","ol","li","a","p"]).each(function(){var a=this;$[a]=function(){return $.elemental(a,arguments[0],arguments[1])}}),function(a){a.fn.flashNotice=function(b){a(this).fadeIn();if(!b)var c=a(this),d=setTimeout(function(){c.fadeOut()},3e3);a(this).click(function(){d&&clearTimeout(d),a(this).fadeOut()})},a.fn.showNotice=function(b){a(this).html("<p class='flash notice'>"+b+"</p>"),a(".notice",this).flashNotice()},a.fn.showAlert=function(b){a(this).html("<p class='flash alert'>"+b+"</p>"),a(".alert",this).flashNotice()}}(jQuery),function(a){a.fn.extend({replaceWithMap:function(){a(this).each(function(){new UnobtrusiveMap(this)})}})}(jQuery),jQuery(function(a){a("a.link_to_map").replaceWithMap()}),function(a){var b=function(){a(this).find(window.location.hash).addClass("linked")};a.fn.extend({markLinkedAnchor:b})}(jQuery),function(a){var b=function(){a(this).find("a[href*='http://www.youtube.com/watch']").each(function(b){var c=a("<span />");a(this).parent().replaceWith(c);var d=a(this).siblings(".captions"),e=a(d).length>0?a(d).attr("href"):null,f=a(this).attr("href").split("=")[1];c.player({id:"yt"+b,media:f,captions:e})})};a.fn.extend({enhanceYoutubeVideoLinks:b})}(jQuery),$(document).ready(function(){$(window).resize(function(){$(".player-container").each(function(){$(this).width()>580?$(this).addClass("player-wide"):$(this).removeClass("player-wide")})})});var PlayerManager=function(){var a={};this.getPlayer=function(b){return a[b]!=undefined?a[b]:null},this.addPlayer=function(b){return a[b.config.id]==undefined?(a[b.config.id]=b,!0):!1},this.removePlayer=function(b){a[b]!=undefined&&delete a[b]}},PlayerDaemon=new PlayerManager,html5_methods={play:function(){this.player.play(),this.setSliderTimeout(),this.config.captionsOn&&this.captions&&this.setCaptionTimeout()},pause:function(){this.player.pause(),this.clearSliderTimeout(),this.config.captionsOn&&this.captions&&this.clearCaptionTimeout()},ffwd:function(){var a=this.getCurrentTime()+this.config.player_skip;this.seek(a)},rewd:function(){var a=this.getCurrentTime()-this.config.player_skip;a<0&&(a=0),this.seek(a)},mute:function(){var a=this.$html.find("button.mute");this.player.muted?(this.player.muted=!1,a.hasClass("muted")&&a.removeClass("muted")):(this.player.muted=!0,a.addClass("muted"))},volup:function(){var a=this.player.volume*100;a<100-this.config.volume_step?a+=this.config.volume_step:a=100,this.player.volume=a/100,this.updateVolume(Math.round(a))},voldwn:function(){var a=this.player.volume*100;a>this.config.volume_step?a-=this.config.volume_step:a=0,this.player.volume=a/100,this.updateVolume(Math.round(a))},getDuration:function(){return this.player.duration},getCurrentTime:function(){return this.player.currentTime},getBytesLoaded:function(){return this.player.buffered.end(0)},getBytesTotal:function(){return this.player.seekable!=undefined?this.player.seekable.end():this.player.duration},seek:function(a){this.player.currentTime=a},cue:function(){return}};(function(a){a.fn.player=function(b,c){function k(b){this.config=e,a.extend(!0,this,j,c),this.is_html5=!1;var d=h(this);d&&f(d.mimetype,d.container)&&this.config.useHtml5?(this.is_html5=!0,this.$html=this.assembleHTML5(d.container,d.mimetype),a.extend(this,html5_methods)):this.$html=this.assembleHTML(),this.config.captions&&this.getCaptions()}var d={id:"media_player",url:"https://www.youtube.com/apiplayer?enablejsapi=1&version=3&playerapiid=",media:"8LiQ-bLJaM4",repeat:!1,captions:null,captionsOn:!0,flashWidth:"100%",flashHeight:"300px",playerStyles:{height:"100%",width:"100%"},sliderTimeout:350,flashContainer:"span",playerContainer:"span",image:"",playerSkip:10,volumeStep:10,buttons:{forward:!0,rewind:!0,toggle:!0},logoURL:"http://www.nomensa.com?ref=logo",useHtml5:!0,swfCallback:null},e=a.extend(!0,{},d,b),f=function(a,b){var c=document.createElement(b);if(c.canPlayType!=undefined){var d=c.canPlayType(a);if(d.toLowerCase()=="maybe"||d.toLowerCase()=="probably")return!0}return!1},g=function(a){var b="",c="video";switch(a){case"mp4":b='video/mp4; codecs="avc1.42E01E, mp4a.40.2"';break;case"m4v":b='video/mp4; codecs="avc1.42E01E, mp4a.40.2"';break;case"ogg":b='video/ogg; codecs="theora, vorbis"';break;case"ogv":b='video/ogg; codecs="theora, vorbis"';break;case"webm":b='video/webm; codecs="vp8, vorbis"';break;case"mp3":b="audio/mpeg",c="audio"}return{mimetype:b,container:c}},h=function(a){var b=a.config.media,c=b.lastIndexOf(".");if(c!=-1){var d=b.substring(c+1),e=g(d);return e}return null},i=function(){return a.browser.mozilla?parseInt(a.browser.version,10)>=2?!0:!1:!1},j={init:function(a){this.player=a,this.cue(),this.player.addEventListener("onStateChange",'(function(state) { return playerState(state, "'+this.config.id+'"); })')},generatePlayerContainer:function(){var b=a("<"+this.config.playerContainer+" />").css(this.config.playerStyles).addClass("player-container");return a.browser.msie&&b.addClass("player-container-ie player-container-ie-"+a.browser.version.substring(0,1)),b},getFlashVars:function(){var a={controlbar:"none",file:this.config.media};return this.config.image!=""&&(a.image=this.config.image),this.config.repeat&&(a.repeat=this.config.repeat),a},getFlashParams:function(){return{allowScriptAccess:"always",wmode:"transparent"}},getURL:function(){return[this.config.url,this.config.id].join("")},generateFlashPlayer:function(b){var c=this,d=this.getFlashVars(),e=this.getFlashParams(),f={id:this.config.id,name:this.config.id},g=a("<"+this.config.flashContainer+" />").attr("id","player-"+this.config.id).addClass("flashReplace").html('This content requires Macromedia Flash Player. You can <a href="http://get.adobe.com/flashplayer/">install or upgrade the Adobe Flash Player here</a>.'),h=a("<span />").addClass("video"),j=this.getURL();return setTimeout(function(){swfobject.embedSWF(j,g.attr("id"),c.config.flashWidth,c.config.flashHeight,"9.0.115",null,d,e,f,c.config.swfCallback),i()&&c.$html.find("object").attr("tabindex","-1")},0),b.append(h.append(g)),b},generateHTML5Player:function(b,c,d){var e=a("<span />");e[0].className="video";var f=a("<"+c+" />").attr({id:this.config.id,src:this.config.media,type:d}).css({width:"100%",height:"50%"});return a.trim(this.config.image)!=""&&f.attr({poster:a.trim(this.config.image)}),b.append(e.append(f))},createButton:function(b,c){var d=0,e=[b,this.config.id].join("-"),f=a("<button />").append(c).addClass(b).attr({title:b,id:e}).addClass("ui-corner-all ui-state-default").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){a(this).addClass("ui-state-focus")}).blur(function(){a(this).removeClass("ui-state-focus")}).click(function(a){a.preventDefault()});return f},getFuncControls:function(){var b=this,c=a("<div>");c[0].className="player-controls";var d=[];if(b.config.buttons.toggle){var e=b.createButton("play","Play").attr({"aria-live":"assertive"}).click(function(){a(this).hasClass("play")?(a(this).removeClass("play").addClass("pause").attr({title:"Pause",id:"pause-"+b.config.id}).text("Pause"),b.play()):(a(this).removeClass("pause").addClass("play").attr({title:"Play",id:"play-"+b.config.id}).text("Play"),b.pause())});d.push(e)}else{var f=b.createButton("play","Play").click(function(){b.play()}),g=b.createButton("pause","Pause").click(function(){b.pause()});d.push(f),d.push(g)}if(b.config.buttons.rewind){var h=b.createButton("rewind","Rewind").click(function(){b.rewd()});d.push(h)}if(b.config.buttons.forward){var i=b.createButton("forward","Forward").click(function(){b.ffwd()});d.push(i)}if(b.config.captions){var j=b.createButton("captions","Captions").click(function(){b.toggleCaptions()}),k=b.config.captionsOn==!0?"captions-on":"captions-off";j.addClass(k),d.push(j)}var l;for(l=0;l<d.length;l=l+1)c[0].appendChild(d[l][0]);return c},getVolControls:function(){var b=this,c=a("<div>").addClass("volume-controls"),d=b.createButton("mute","Mute").click(function(){b.mute()}),e=b.createButton("vol-up",'+<span class="ui-helper-hidden-accessible"> Volume Up</span>').click(function(){b.volup()}),f=b.createButton("vol-down",'-<span class="ui-helper-hidden-accessible"> Volume Down</span>').click(function(){b.voldwn()}),g=a("<span />").attr({id:"vol-"+b.config.id,"class":"vol-display"}).text("100%"),h=[d,f,e,g],i;for(i=0;i<h.length;i=i+1)c[0].appendChild(h[i][0]);return c},getSliderBar:function(){var b=a("<span />").addClass("ui-helper-hidden-accessible").html("<p>The timeline slider below uses WAI ARIA. Please use the documentation for your screen reader to find out more.</p>"),c=a("<span />").addClass("current-time").attr({id:"current-"+this.config.id}).text("00:00:00"),d=this.getSlider(),e=a("<span />").addClass("duration-time").attr({id:"duration-"+this.config.id}).text("00:00:00"),f=a("<div />").addClass("timer-bar").append(b),g=[c,d,e],h;for(h=0;h<g.length;h=h+1)f[0].appendChild(g[h][0]);return f},getSlider:function(){var b=this,c=a("<span />").attr("id","slider-"+this.config.id).slider({orientation:"horizontal",change:function(a,c){var d=c.value,e=d/100*b.getDuration();b.seek(e)}});c.find("a.ui-slider-handle").attr({role:"slider","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"0","aria-valuetext":"0 percent",title:"Slider Control"});var d=a("<span />").addClass("progress-bar").attr({id:"progress-bar-"+this.config.id,tabindex:"-1"}).addClass("ui-progressbar-value ui-widget-header ui-corner-left").css({width:"0%",height:"95%"}),e=a("<span />").attr({id:"loaded-bar-"+this.config.id,tabindex:"-1"}).addClass("loaded-bar ui-progressbar-value ui-widget-header ui-corner-left").css({height:"95%",width:"0%"});return c.append(d,e)},setSliderTimeout:function(){var a=this;a.sliderInterval=setInterval(function(){a.updateSlider()},a.config.sliderTimeout)},clearSliderTimeout:function(){var a=this;a.sliderInterval!=undefined&&(a.sliderInterval=clearInterval(a.sliderInterval))},updateSlider:function(){var b=typeof this.duration!="undefined"?this.duration:this.getDuration(),c=typeof this.duration_found=="boolean"?this.duration_found:!1,d=this.getCurrentTime(),e=0;b>0?(e=d/b*100,e=parseInt(e,10)):b=0,c||(a("#duration-"+this.config.id).html(this.formatTime(parseInt(b,10))),this.duration_found=!0),a("#slider-"+this.config.id).find("a.ui-slider-handle").attr({"aria-valuenow":e,"aria-valuetext":e.toString()+" percent"}).css("left",e.toString()+"%"),a("#progress-bar-"+this.config.id).attr({"aria-valuenow":e,"aria-valuetext":e.toString()+" percent"}).css("width",e.toString()+"%"),this.updateLoaderBar(),this.updateTime(d)},updateLoaderBar:function(){var b=this.getBytesLoaded()/this.getBytesTotal()*100;b=parseInt(b,10),isFinite(b)||(b=0),a("#loaded-bar-"+this.config.id).attr({"aria-valuetext":b.toString()+" percent","aria-valuenow":b}).css("width",b.toString()+"%")},formatTime:function(a){var b=0,c=0,d=0;a>=60?(c=parseInt(a/60,10),d=a-c*60,c>=60&&(b=parseInt(c/60,10),c-=parseInt(b*60,10))):d=a;var e=[b,c,d],f;for(f=0;f<e.length;f=f+1)e[f]=e[f]<10?"0"+e[f].toString():e[f].toString();return e.join(":")},updateTime:function(a){var b=this.formatTime(parseInt(a,10));this.$html.find("#current-"+this.config.id).html(b)},getControls:function(){var b=a("<span />").addClass("ui-corner-bottom").addClass("control-bar"),c=a("<a />").attr("href","http://www.nomensa.com?ref=logo").html("Accessible Media Player by Nomensa").addClass("logo");b.append(c);var d=this.getFuncControls(),e=this.getVolControls(),f=this.getSliderBar(),g=[d,e,f],h;for(h=0;h<g.length;h=h+1)b[0].appendChild(g[h][0]);return b},assembleHTML:function(){var a=this.generatePlayerContainer(),b=this.generateFlashPlayer(a),c=b.append(this.getControls());return c},assembleHTML5:function(a,b){var c=this.generatePlayerContainer(),d=this.generateHTML5Player(c,a,b),e=d.append(this.getControls());return e},updateVolume:function(b){a("#vol-"+this.config.id).text(b.toString()+"%");var c=this.$html.find("button.mute");b==0?c.addClass("muted"):c.hasClass("muted")&&c.removeClass("muted")},getCaptions:function(){var b=this;if(b.config.captions){var c=[];a.ajax({url:b.config.captions,success:function(c){a(c).find("p").length>0&&(b.captions=a(c).find("p"))}})}},syncCaptions:function(){var a;if(this.captions){var b=this.getCurrentTime();b=this.formatTime(parseInt(b,10)),a=this.captions.filter('[begin="'+b+'"]'),a.length==1&&this.insertCaption(a)}},insertCaption:function(b){if(this.$html.find(".caption").length==1)this.$html.find(".caption").text(b.text());else{var c=a("<div>").text(b.text());c[0].className="caption",this.$html.find(".video").prepend(c)}},getPreviousCaption:function(a){var b;a==undefined&&(a=this.getCurrentTime());var c=this.formatTime(parseInt(a,10));if(this.captions){b=this.captions.filter('[begin="'+c+'"]');while(b.length!=1&&a>0)a--,c=this.formatTime(parseInt(a,10)),b=this.captions.filter('[begin="'+c+'"]');b.length==1&&this.insertCaption(b)}},setCaptionTimeout:function(){var a=this;a.captionInterval==undefined&&(a.captionInterval=setInterval(function(){a.syncCaptions()},500))},clearCaptionTimeout:function(){this.captionInterval!=undefined&&(this.captionInterval=clearInterval(this.captionInterval))},play:function(){this.player.playVideo(),this.setSliderTimeout(),this.config.captionsOn&&this.captions&&this.setCaptionTimeout()},pause:function(){this.player.pauseVideo(),this.clearSliderTimeout(),this.config.captionsOn&&this.captions&&this.clearCaptionTimeout()},ffwd:function(){var a=this.getCurrentTime()+this.config.playerSkip;this.seek(a)},rewd:function(){var a=this.getCurrentTime()-this.config.playerSkip;a<0&&(a=0),this.seek(a)},mute:function(){var a=this.$html.find("button.mute");this.player.isMuted()?(this.player.unMute(),a.hasClass("muted")&&a.removeClass("muted")):(this.player.mute(),a.addClass("muted"))},volup:function(){var a=this.player.getVolume();a<100-this.config.volumeStep?a+=this.config.volumeStep:a=100,this.player.setVolume(a),this.updateVolume(a)},voldwn:function(){var a=this.player.getVolume();a>this.config.volumeStep?a-=this.config.volumeStep:a=0,this.player.setVolume(a),this.updateVolume(a)},getDuration:function(){return this.player.getDuration()},getCurrentTime:function(){return this.player.getCurrentTime()},getBytesLoaded:function(){return this.player.getVideoBytesLoaded()},getBytesTotal:function(){return this.player.getVideoBytesTotal()},seek:function(a){this.player.seekTo(a),this.config.captionsOn&&this.captions&&(this.$html.find(".caption").remove(),this.clearCaptionTimeout(),this.setCaptionTimeout(),this.getPreviousCaption())},cue:function(){this.player.cueVideoById(this.config.media)},toggleCaptions:function(){var a=this,b=this.$html.find(".captions");b.hasClass("captions-off")?(b.removeClass("captions-off").addClass("captions-on"),a.getPreviousCaption(),a.setCaptionTimeout(),a.config.captionsOn=!0):(b.removeClass("captions-on").addClass("captions-off"),a.clearCaptionTimeout(),a.$html.find(".caption").remove(),a.config.captionsOn=!1)}};return this.each(function(b){var c=a(this),d=new k(b);c.html(d.$html),d.$html.width()>580&&d.$html.addClass("player-wide"),d.is_html5&&(d.player=document.getElementById(d.config.id)),PlayerDaemon.addPlayer(d)})}})(jQuery);var swfobject=function(){function A(){if(t)return;try{var a=i.getElementsByTagName("body")[0].appendChild(Q("span"));a.parentNode.removeChild(a)}catch(b){return}t=!0;var c=l.length;for(var d=0;d<c;d++)l[d]()}function B(a){t?a():l[l.length]=a}function C(b){if(typeof h.addEventListener!=a)h.addEventListener("load",b,!1);else if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof h.attachEvent!=a)R(h,"onload",b);else if(typeof h.onload=="function"){var c=h.onload;h.onload=function(){c(),b()}}else h.onload=b}function D(){k?E():F()}function E(){var c=i.getElementsByTagName("body")[0],d=Q(b);d.setAttribute("type",e);var f=c.appendChild(d);if(f){var g=0;(function(){if(typeof f.GetVariable!=a){var b=f.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),y.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)])}else if(g<10){g++,setTimeout(arguments.callee,10);return}c.removeChild(d),f=null,F()})()}else F()}function F(){var b=m.length;if(b>0)for(var c=0;c<b;c++){var d=m[c].id,e=m[c].callbackFn,f={success:!1,id:d};if(y.pv[0]>0){var g=P(d);if(g)if(S(m[c].swfVersion)&&!(y.wk&&y.wk<312))U(d,!0),e&&(f.success=!0,f.ref=G(d),e(f));else if(m[c].expressInstall&&H()){var h={};h.data=m[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));I(h,i,d,e)}else J(g),e&&e(f)}else{U(d,!0);if(e){var n=G(d);n&&typeof n.SetVariable!=a&&(f.success=!0,f.ref=n),e(f)}}}}function G(c){var d=null,e=P(c);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(b)[0];f&&(d=f)}return d}function H(){return!u&&S("6.0.65")&&(y.win||y.mac)&&!(y.wk&&y.wk<312)}function I(b,c,d,e){u=!0,r=e||null,s={success:!1,id:d};var g=P(d);if(g){g.nodeName=="OBJECT"?(p=K(g),q=null):(p=g,q=d),b.id=f;if(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";i.title=i.title.slice(0,47)+" - Flash Player Installation";var j=y.ie&&y.win?"ActiveX":"PlugIn",k="MMredirectURL="+h.location.toString().replace(/&/g,"%26")+"&MMplayerType="+j+"&MMdoctitle="+i.title;typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k;if(y.ie&&y.win&&g.readyState!=4){var l=Q("div");d+="SWFObjectNew",l.setAttribute("id",d),g.parentNode.insertBefore(l,g),g.style.display="none",function(){g.readyState==4?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}()}L(b,c,d)}}function J(a){if(y.ie&&y.win&&a.readyState!=4){var b=Q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(K(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(K(a),a)}function K(a){var c=Q("div");if(y.win&&y.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&c.appendChild(e[g].cloneNode(!0))}}}return c}function L(c,d,f){var g,h=P(f);if(y.wk&&y.wk<312)return g;if(h){typeof c.id==a&&(c.id=f);if(y.ie&&y.win){var i="";for(var j in c)c[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=c[j]:j.toLowerCase()=="styleclass"?i+=' class="'+c[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+c[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",n[n.length]=c.id,g=P(c.id)}else{var m=Q(b);m.setAttribute("type",e);for(var o in c)c[o]!=Object.prototype[o]&&(o.toLowerCase()=="styleclass"?m.setAttribute("class",c[o]):o.toLowerCase()!="classid"&&m.setAttribute(o,c[o]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&M(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}}return g}function M(a,b,c){var d=Q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function N(a){var b=P(a);b&&b.nodeName=="OBJECT"&&(y.ie&&y.win?(b.style.display="none",function(){b.readyState==4?O(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function O(a){var b=P(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function P(a){var b=null;try{b=i.getElementById(a)}catch(c){}return b}function Q(a){return i.createElement(a)}function R(a,b,c){a.attachEvent(b,c),o[o.length]=[a,b,c]}function S(a){var b=y.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function T(c,d,e,f){if(y.ie&&y.mac)return;var g=i.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";f&&(v=null,w=null);if(!v||w!=h){var j=Q("style");j.setAttribute("type","text/css"),j.setAttribute("media",h),v=g.appendChild(j),y.ie&&y.win&&typeof i.styleSheets!=a&&i.styleSheets.length>0&&(v=i.styleSheets[i.styleSheets.length-1]),w=h}y.ie&&y.win?v&&typeof v.addRule==b&&v.addRule(c,d):v&&typeof i.createTextNode!=a&&v.appendChild(i.createTextNode(c+" {"+d+"}"))}function U(a,b){if(!x)return;var c=b?"visible":"hidden";t&&P(a)?P(a).style.visibility=c:T("#"+a,"visibility:"+c)}function V(b){var c=/[\\\"<>\.;]/,d=c.exec(b)!=null;return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}var a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f="SWFObjectExprInst",g="onreadystatechange",h=window,i=document,j=navigator,k=!1,l=[D],m=[],n=[],o=[],p,q,r,s,t=!1,u=!1,v,w,x=!0,y=function(){var f=typeof i.getElementById!=a&&typeof i.getElementsByTagName!=a&&typeof i.createElement!=a,g=j.userAgent.toLowerCase(),l=j.platform.toLowerCase(),m=l?/win/.test(l):/win/.test(g),n=l?/mac/.test(l):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof j.plugins!=a&&typeof j.plugins[c]==b)r=j.plugins[c].description,r&&(typeof j.mimeTypes==a||!j.mimeTypes[e]||!!j.mimeTypes[e].enabledPlugin)&&(k=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof h.ActiveXObject!=a)try{var s=new ActiveXObject(d);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:f,pv:q,wk:o,ie:p,win:m,mac:n}}(),z=function(){if(!y.w3)return;(typeof i.readyState!=a&&i.readyState=="complete"||typeof i.readyState==a&&(i.getElementsByTagName("body")[0]||i.body))&&A(),t||(typeof i.addEventListener!=a&&i.addEventListener("DOMContentLoaded",A,!1),y.ie&&y.win&&(i.attachEvent(g,function(){i.readyState=="complete"&&(i.detachEvent(g,arguments.callee),A())}),h==top&&function(){if(t)return;try{i.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}A()}()),y.wk&&function(){if(t)return;if(!/loaded|complete/.test(i.readyState)){setTimeout(arguments.callee,0);return}A()}(),C(A))}(),W=function(){y.ie&&y.win&&window.attachEvent("onunload",function(){var a=o.length;for(var b=0;b<a;b++)o[b][0].detachEvent(o[b][1],o[b][2]);var c=n.length;for(var d=0;d<c;d++)N(n[d]);for(var e in y)y[e]=null;y=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c,d){if(y.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,m[m.length]=e,U(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(y.w3)return G(a)},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};y.w3&&!(y.wk&&y.wk<312)&&c&&d&&e&&f&&g?(U(d,!1),B(function(){e+="",f+="";var n={};if(k&&typeof k===b)for(var o in k)n[o]=k[o];n.data=c,n.width=e,n.height=f;var p={};if(j&&typeof j===b)for(var q in j)p[q]=j[q];if(i&&typeof i===b)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(S(g)){var s=L(n,p,d);n.id==d&&U(d,!0),m.success=!0,m.ref=s}else{if(h&&H()){n.data=h,I(n,p,d,l);return}U(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){x=!1},ua:y,getFlashPlayerVersion:function(){return{major:y.pv[0],minor:y.pv[1],release:y.pv[2]}},hasFlashPlayerVersion:S,createSWF:function(a,b,c){return y.w3?L(a,b,c):undefined},showExpressInstall:function(a,b,c,d){y.w3&&H()&&I(a,b,c,d)},removeSWF:function(a){y.w3&&N(a)},createCSS:function(a,b,c,d){y.w3&&T(a,b,c,d)},addDomLoadEvent:B,addLoadEvent:C,getQueryParamValue:function(a){var b=i.location.search||i.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return V(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return V(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(u){var a=P(f);a&&p&&(a.parentNode.replaceChild(p,a),q&&(U(q,!0),y.ie&&y.win&&(p.style.display="block")),r&&r(s)),u=!1}}}}();jQuery(function(a){a(".flash.notice, .flash.alert").flashNotice()}),function(a){function c(){var b=d(this);return isNaN(b.datetime)||a(this).text(e(b.datetime)),this}function d(c){c=a(c);if(!c.data("timeago")){c.data("timeago",{datetime:b.datetime(c)});var d=a.trim(c.text());d.length>0&&c.attr("title",d)}return c.data("timeago")}function e(a){return b.inWords(f(a))}function f(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return b instanceof Date?e(b):typeof b=="string"?e(a.timeago.parse(b)):e(a.timeago.datetime(b))};var b=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(b){function k(d,e){var f=a.isFunction(d)?d(e,b):d,g=c.numbers&&c.numbers[e]||e;return f.replace(/%d/i,g)}var c=this.settings.strings,d=c.prefixAgo,e=c.suffixAgo;this.settings.allowFuture&&b<0&&(d=c.prefixFromNow,e=c.suffixFromNow);var f=Math.abs(b)/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(c.seconds,Math.round(f))||f<90&&k(c.minute,1)||g<45&&k(c.minutes,Math.round(g))||g<90&&k(c.hour,1)||h<24&&k(
c.hours,Math.round(h))||h<48&&k(c.day,1)||i<30&&k(c.days,Math.floor(i))||i<60&&k(c.month,1)||i<365&&k(c.months,Math.floor(i/30))||j<2&&k(c.year,1)||k(c.years,Math.floor(j));return a.trim([d,l,e].join(" "))},parse:function(b){var c=a.trim(b);return c=c.replace(/\.\d\d\d+/,""),c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(c)},datetime:function(c){var d=a(c).get(0).tagName.toLowerCase()==="time",e=d?a(c).attr("datetime"):a(c).attr("title");return b.parse(e)}}),a.fn.timeago=function(){var a=this;a.each(c);var d=b.settings;return d.refreshMillis>0&&setInterval(function(){a.each(c)},d.refreshMillis),a},document.createElement("abbr"),document.createElement("time")}(jQuery);var utils={};(function(a){utils.setMinHeightToLargestItem=function(b){var c=0;a(b).each(function(){c=Math.max(c,a(this).height())}),a(b).css({"min-height":c+"px"})}})(jQuery),function(a){var b=function(b){var c=a(this),d=a(b,c);d.hide();var e=a.a("show",{"class":"toggle",href:"#"});a("h1",c).append(e),e.click(function(){var b=a(this).text();return b=="show"?a(this).text("hide"):a(this).text("show"),d.toggle(),!1})};a.fn.extend({addToggleLink:b})}(jQuery),function(){"use strict";var a=this,b=a.jQuery;typeof a.GOVUK=="undefined"&&(a.GOVUK={});var c={_hasScrolled:!1,_scrollTimeout:!1,init:function(){var a=b(".js-back-to-content");a.length>0&&(c.$els=a,c._scrollTimeout===!1&&(b(window).scroll(c.onScroll),c._scrollTimeout=window.setInterval(c.checkScroll,50)),b(window).resize(c.onResize),c.checkScroll())},onScroll:function(){c._hasScrolled=!0},checkScroll:function(){if(c._hasScrolled===!0){c._hasScrolled=!1;var a=b(window).scrollTop();c.$els.each(function(d,e){var f=b(e),g=50,h=f.data("backToContent-start"),i=f.data("backToContent-stop"),j=f.data("backToContent-offset"),k;h||(k=b(f.find("a").attr("href")),h=k.height()+k.offset().top+g,f.data("backToContent-start",h),j=b("#whitehall-wrapper").offset().top-15,f.data("backToContent-offset",j),i=b(".block-4").offset().top-g,f.data("backToContent-stop",i)),h<a?c.show(f):c.hide(f),i<a?c.stick(f,i-j):c.unstick(f)})}},stick:function(a,b){a.css({position:"absolute",top:b})},unstick:function(a){a.css({position:"",top:""})},hide:function(a){a.addClass("visuallyhidden")},show:function(a){b(window).width()>768&&a.removeClass("visuallyhidden")}};a.GOVUK.backToContent=c}.call(this),typeof window.GOVUK=="undefined"&&(window.GOVUK={}),function(a){"use strict";var b={loading:!1,$form:null,drawPagination:function(c){var d=a("#show-more-documents"),e=a("");d.length>0&&d.remove();if(c.next_page_url){var f=a('<ul class="previous-next-navigation infinite" />'),g,h;e=a('<nav id="show-more-documents" role="navigation" />').append(f),c.next_page_url&&(g=a('<li class="next" />'),h=a("<a>Next page "+b.progressSpan(c.next_page,c.total_pages)+"</a>").attr("href",c.next_page_url),f.append(g),g.append(h))}return e},progressSpan:function(a,b){return"<span>"+a+" of "+b+"</span>"},importantAttributes:["id","title","url","type"],importantAttribute:function(c){return a.inArray(c,b.importantAttributes)<0},capitalize:function(a){return a.replace(/_/," ").replace(/(^|\s)([a-z])/g,function(a,b,c){return b+c.toUpperCase()})},drawTableCell:function(a,b){var c=b;return'<td class="'+a+' attribute">'+c+"</td>"},drawTableRows:function(c){var d=a("<tbody />"),e,f;for(e=0,f=c.length;e<f;e++){var g=c[e],h=a('<tr class="document-row" />'),i=a('<th scope="row" class="title attribute"/>'),j=a('<a href="'+g.url+'" title="View '+g.title+'">'+g.title+"</a>");h.attr("id",g.type+"_"+g.id).addClass(e<3?" recent":""),i.append(j),h.append(i);for(var k in g)b.importantAttribute(k)&&h.append(a(b.drawTableCell(k,g[k])));d.append(h)}return d},drawTable:function(c){var d=a(".filter-results");if(c.results.length>0){var e;if(a("#document-list").length<1){var f=a('<table id="document-list" class="document-list" />'),g=a('<thead class="visuallyhidden" />'),h=a("<tr />").append('<th scope="col">Title</th>');for(var i in c.results[0])b.importantAttribute(i)&&h.append(a('<th scope="col">'+b.capitalize(i)+"</th>"));g.append(h),f.append(g),f.append("<tbody />"),d.empty().append(f)}e=b.drawTableRows(c.results),d.find(".document-list tbody").replaceWith(e),d.append(b.drawPagination(c))}else d.empty(),d.append('<div class="no-results"><h2>There are no matching documents.</h2><p>Try making your search broader and try again.</p></div>')},extendTable:function(c){var d=a(".filter-results");if(c.results.length>0){var e=d.find("tbody"),f=b.drawTableRows(c.results);e.append(f.contents()),d.find("nav").remove(),d.append(b.drawPagination(c))}},updateAtomFeed:function(b){b.atom_feed_url&&a(".subscribe a.feed").attr("href",b.atom_feed_url)},submitFilters:function(c){c.preventDefault();var d=b.$form,e=d.find("input[type=submit]"),f=d.attr("action"),g=d.serializeArray();e.addClass("disabled"),b.loading=!0,a.ajax(f,{cache:!1,dataType:"json",data:g,complete:function(){b.loading=!1},success:function(a){b.updateAtomFeed(a),a.results&&b.drawTable(a);var c=f+"?"+d.serialize();history.pushState(b.currentPageState(),null,c),window._gaq&&_gaq.push(["_trackPageview",c]),e.removeAttr("disabled").removeClass("disabled")},error:function(){e.removeAttr("disabled")}})},currentPageState:function(){return{html:a(".filter-results").html(),selected:a.map(b.$form.find("select"),function(b){var c=a(b);return{id:c.attr("id"),value:c.val()}}),text:a.map(b.$form.find("input[type=text]"),function(b){var c=a(b);return{id:c.attr("id"),value:c.val()}}),checked:a.map(b.$form.find("input[type=radio]:checked"),function(b){return a(b).attr("id")})}},onPopState:function(b){b.state&&b.state.html&&(a(".filter-results").html(b.state.html),a.each(b.state.selected,function(b,c){a("#"+c.id).val(c.value)}),a.each(b.state.text,function(b,c){a("#"+c.id).val(c.value)}),a.each(b.state.checked,function(b,c){a("#"+c).attr("checked",!0)}))},loadMoreInline:function(){var c=a("#show-more-documents .next a"),d;!b.loading&&c.length>0&&(d=c.attr("href"),b.loading=!0,a.ajax(d,{cache:!1,dataType:"json",complete:function(){b.loading=!1,a(".infinite.loading").removeClass("loading")},success:function(a){a.results&&b.extendTable(a)}}))},initScroll:function(){b.scrolled=!1,a("#show-more-documents .previous-next-navigation").addClass("infinite"),a(window).scroll(function(){b.scrolled=!0});var c=window.setInterval(b.onScroll,250)},onScroll:function(){if(b.scrolled){b.scrolled=!1;var c=a(window),d=a(".previous-next-navigation"),e=c.scrollTop()+c.height(),f=d.offset();b.hideFooter(),d.addClass("loading").find(".next a").text("Loading more..."),f&&e+100>f.top?b.loadMoreInline():b.showFooter()}},hideFooter:function(){b.footerHidden!==!0&&(a("#footer").addClass("visuallyhidden"),b.footerHidden=!1)},showFooter:function(){var b=a("#show-more-documents .next a");b.length===0&&a("#footer").removeClass("visuallyhidden")}};window.GOVUK.documentFilter=b;var c=function(){if(window.ieVersion&&ieVersion===6)return;return this.each(function(){if(window.GOVUK.support.history()){var c=a(this);a(window).on("popstate",function(a){b.onPopState(event)}),b.$form=c,history.replaceState(b.currentPageState(),null),c.submit(b.submitFilters),c.find("select").change(function(a){c.submit()})}a("#show-more-documents .previous").length===0&&b.initScroll()}),this};a.fn.extend({enableDocumentFilter:c})}(jQuery),function(a,b){var c=0;a.fn.getPercentage=function(){var a=this.attr("style").match(/margin\-left:(.*[0-9])/i)&&parseInt(RegExp.$1,10);return a},a.fn.adjRounding=function(b){var c=a(this),d=c.find(b),e=c.parent().width()-a(d[0]).width();if(e!==0){a(d).css("position","relative");for(var f=0;f<d.length;f++)a(d[f]).css("left",e*f+"px")}return this},a.fn.carousel=function(d){if(this.data("carousel-initialized"))return;this.data("carousel-initialized",!0);var e={slider:".slider",slide:".slide",prevSlide:null,nextSlide:null,slideHed:null,addPagination:!1,addNav:d!=b&&(d.prevSlide||d.nextSlide)?!1:!0,namespace:"carousel",speed:300},f=a.extend(e,d),g=this,h=document.body||document.documentElement,i=function(){h.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;");var a=!!(h.style.transition||h.style.webkitTransition||h.style.msTransition||h.style.OTransition||h.style.MozTransition);return a},j={init:function(){c++,g.each(function(b){var d=a(this),e=d.find(f.slider),g=d.find(f.slide),h=g.length,i="margin-left "+f.speed/1e3+"s ease",k="carousel-"+c+"-"+b;if(g.length<=1)return;d.css({overflow:"hidden",width:"100%"}).attr("role","application"),e.attr("id",e[0].id||"carousel-"+c+"-"+b).css({marginLeft:"0px","float":"left",width:100*h+"%","-webkit-transition":i,"-moz-transition":i,"-ms-transition":i,"-o-transition":i,transition:i}).bind("carouselmove",j.move).bind("nextprev",j.nextPrev).bind("navstate",j.navState),g.css({"float":"left",width:100/h+"%"}).each(function(b){var c=a(this);c.attr({role:"tabpanel document",id:k+"-slide"+b}),f.addPagination&&c.attr("aria-labelledby",k+"-tab"+b)}),f.addPagination&&j.addPagination(),f.addNav&&j.addNav(),e.trigger("navstate",{current:0})})},addNav:function(){g.each(function(b){var c=a(this),d=c.find(f.slider),e=d[0].id,g=['<ul class="slidecontrols" role="navigation">','  <li role="presentation"><a href="#'+e+'" class="'+f.namespace+'-next">Next</a></li>','  <li role="presentation"><a href="#'+e+'" class="'+f.namespace+'-prev">Prev</a></li>',"</ul>"].join(""),h={nextSlide:"."+f.namespace+"-next",prevSlide:"."+f.namespace+"-prev"};f=a.extend(f,h),c.prepend(g)})},addPagination:function(){g.each(function(b){var d=a(this),e=a('<ol class="'+f.namespace+'-tabs" role="tablist navigation" />'),g=d.find(f.slider),h=d.find(f.slide),i=h.length,j="carousel-"+c+"-"+b;while(i--){var k=a(h[i]).find(f.slideHed).text()||"Page "+(i+1),l=['<li role="presentation">','<a href="#'+j+"-slide"+i+'"',' aria-controls="'+j+"-slide"+i+'"',' id="'+j+"-tab"+i+'" role="tab">'+k+"</a>","</li>"].join("");e.prepend(l)}e.appendTo(d).find("li").keydown(function(b){var c=a(this),d=c.prev().find("a"),e=c.next().find("a");switch(b.which){case 37:case 38:d.length&&d.trigger("click").focus(),b.preventDefault();break;case 39:case 40:e.length&&e.trigger("click").focus(),b.preventDefault()}}).find("a").click(function(b){var c=a(this);if(c.attr("aria-selected")=="false"){var e=c.parent().index(),g=-(100*e),h=d.find(f.slider);h.trigger("carouselmove",{moveTo:g})}b.preventDefault()})})},roundDown:function(a){var b=parseInt(a,10);return Math.ceil((b-b%100)/100)*100},navState:function(b,c){var d=a(this),e=d.find(f.slide),g=-(c.current/100),h=a(e[g]);d.attr("aria-activedescendant",h[0].id),h.addClass(f.namespace+"-active-slide").attr("aria-hidden",!1).siblings().removeClass(f.namespace+"-active-slide").attr("aria-hidden",!0);if(!!f.prevSlide||!!f.nextSlide){var i=a('[href*="#'+this.id+'"]');i.removeClass(f.namespace+"-disabled"),g==0?i.filter(f.prevSlide).addClass(f.namespace+"-disabled"):g==e.length-1&&i.filter(f.nextSlide).addClass(f.namespace+"-disabled")}if(!!f.addPagination){var j=h.attr("aria-labelledby"),k=a("#"+j);k.parent().addClass(f.namespace+"-active-tab").siblings().removeClass(f.namespace+"-active-tab").find("a").attr({"aria-selected":!1,tabindex:-1}),k.attr({"aria-selected":!0,tabindex:0})}},move:function(b,c){var d=a(this);d.trigger(f.namespace+"-beforemove").trigger("navstate",{current:c.moveTo}),i()?d.adjRounding(f.slide).css("marginLeft",c.moveTo+"%").one("transitionend webkitTransitionEnd OTransitionEnd",function(){a(this).trigger(f.namespace+"-aftermove")}):d.adjRounding(f.slide).animate({marginLeft:c.moveTo+"%"},{duration:f.speed,queue:!1},function(){a(this).trigger(f.namespace+"-aftermove")})},nextPrev:function(b,c){var d=a(this),e=d?d.getPercentage():0,g=d.find(f.slide),h=c.dir==="prev"?e!=0:-e<(g.length-1)*100,i=a('[href="#'+this.id+'"]');if(!d.is(":animated")&&h){c.dir==="prev"?e=e%100!=0?j.roundDown(e):e+100:e=e%100!=0?j.roundDown(e)-100:e-100,d.trigger("carouselmove",{moveTo:e}),i.removeClass(f.namespace+"-disabled").removeAttr("aria-disabled");switch(e){case-(g.length-1)*100:i.filter(f.nextSlide).addClass(f.namespace+"-disabled").attr("aria-disabled",!0);break;case 0:i.filter(f.prevSlide).addClass(f.namespace+"-disabled").attr("aria-disabled",!0)}}else{var k=j.roundDown(e);d.trigger("carouselmove",{moveTo:k})}}};j.init(this),a(f.nextSlide+","+f.prevSlide).bind("click",function(b){var c=a(this),d=this.hash,e=c.is(f.prevSlide)?"prev":"next",g=a(d);if(c.is("."+f.namespace+"-disabled"))return!1;g.trigger("nextprev",{dir:e}),b.preventDefault()}).bind("keydown",function(b){var c=a(this),d=this.hash;switch(b.which){case 37:case 38:a("#"+d).trigger("nextprev",{dir:"next"}),b.preventDefault();break;case 39:case 40:a("#"+d).trigger("nextprev",{dir:"prev"}),b.preventDefault()}});var k={wrap:this,slider:f.slider};return g.bind("dragSnap",k,function(b,c){var d=a(this).find(f.slider),e=c.direction==="left"?"next":"prev";d.trigger("nextprev",{dir:e})}),g.filter("[data-autorotate]").each(function(){var b,c=a(this),d=c.attr("data-autorotate"),e=c.find(f.slide).length,g=function(){var h=c.find(f.slider),i=-(a(f.slider).getPercentage()/100)+1;switch(i){case e:clearInterval(b),b=setInterval(function(){g(),h.trigger("nextprev",{dir:"prev"})},d);break;case 1:clearInterval(b),b=setInterval(function(){g(),h.trigger("nextprev",{dir:"next"})},d)}};b=setInterval(g,d),c.attr("aria-live","polite").bind("mouseenter click touchstart",function(){clearInterval(b)})}),this},a.event.special.dragSnap={setup:function(c){var d=a(this),e=function(a,b){var c=.3,d=b?"margin-left "+c+"s ease":"none";a.css({"-webkit-transition":d,"-moz-transition":d,"-ms-transition":d,"-o-transition":d,transition:d})},f=function(a){return a=parseInt(a,10),Math.ceil((a-a%100)/100)*100},g=function(a,c){var d=c.target,g=d.attr("style")!=b?d.getPercentage():0,h=c.left===!1?f(g)-100:f(g),i=document.body.style,j=function(){dBody.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;");var a=!!(dBody.style.transition||dBody.style.webkitTransition||dBody.style.MozTransition);return a};e(d,!0),j()?d.css("marginLeft",h+"%"):d.animate({marginLeft:h+"%"},opt.speed)};d.bind("snapback",g).bind("touchstart",function(f){function l(a){var b=a.originalEvent.touches?a.originalEvent.touches[0]:a;i={time:(new Date).getTime(),coords:[b.pageX,b.pageY]};if(!h||Math.abs(h.coords[0]-i.coords[0])<Math.abs(h.coords[1]-i.coords[1]))return;j.css({"margin-left":k+(i.coords[0]-h.coords[0])/h.origin.width()*100+"%"}),Math.abs(h.coords[0]-i.coords[0])>10&&a.preventDefault()}var g=f.originalEvent.touches?f.originalEvent.touches[0]:f,h={time:(new Date).getTime(),coords:[g.pageX,g.pageY],origin:a(f.target).closest(c.wrap)},i,j=a(f.target).closest(c.slider),k=j.attr("style")!=b?j.getPercentage():0;e(j,!1),d.bind("gesturestart",function(a){d.unbind("touchmove",l).unbind("touchend",l)}).bind("touchmove",l).one("touchend",function(a){d.unbind("touchmove",l),e(j,!0);if(h&&i){if(Math.abs(h.coords[0]-i.coords[0])>10&&Math.abs(h.coords[0]-i.coords[0])>Math.abs(h.coords[1]-i.coords[1]))a.preventDefault();else{d.trigger("snapback",{target:j,left:!0});return}if(Math.abs(h.coords[0]-i.coords[0])>1&&Math.abs(h.coords[1]-i.coords[1])<75){var c=h.coords[0]>i.coords[0];-(i.coords[0]-h.coords[0])>h.origin.width()/4||i.coords[0]-h.coords[0]>h.origin.width()/4?h.origin.trigger("dragSnap",{direction:c?"left":"right"}):d.trigger("snapback",{target:j,left:c})}}h=i=b})})}}}(jQuery),function(a){a.fn.equalHeightHelper=function(b){var c=a(this),d=a.extend({breakpointSelector:window,breakpointWidth:768,selectorsToResize:[]},b),e=function(){a(d.selectorsToResize).each(function(a,b){c.find(b).css("min-height","0")})},f=function(){e(),a(d.breakpointSelector).width()>=d.breakpointWidth&&a.each(d.selectorsToResize,function(b,d){c.each(function(b,c){utils.setMinHeightToLargestItem(a(c).find(d))})})},g,h=function(){try{c&&(g!==!1&&clearTimeout(g),g=setTimeout(f,200))}catch(a){}};return a(d.breakpointSelector).resize(h),f(),a(this)}}(jQuery),function(a){a.fn.navigationList=function(b,c){var d=a("<ul></ul>");return c!=undefined&&d.addClass(c),a(this).find(b).each(function(b,c){var e=a("<li></li>"),f=a("<a>"+a(c).text()+"</a>");f.attr("href","#"+a(c).attr("id")),e.append(f),d.append(e)}),d}}(jQuery),function(a){function b(a){return parseInt(a.position().top,10)}"use strict",a.fn.hideExtraRows=function(c){c=c||{};if(this.length>1){var d=b(this.first()),e=!1;this.slice(1).each(function(c,f){if(e||!e&&b(a(f))>d)e=!0,a(f).addClass("js-hidden")});if(e){var f=a('<a class="show-other-content" href="#" title="Show additional content"><span class="plus">+&nbsp;</span>others</a>');f.on("click",a.proxy(function(b){b.preventDefault(),this.filter(".js-hidden").removeClass("js-hidden").addClass("js-shown"),c.showWrapper?c.showWrapper.remove():a(b.target).remove()},this)),c.showWrapper&&(f=c.showWrapper.append(f)),c.appendToParent?this.first().parent().append(f):this.first().parent().after(f)}}return this}}(jQuery),function(a){"use strict",a.fn.hideOtherLinks=function(){return a(this).each(function(b,c){var d=a(c),e=a('<span class="other-content" />'),f=[],g=[],h=f;a(d.contents()).each(function(b,c){if(c.nodeValue&&c.nodeValue===".")return;h.push(c),a(c).is("a")&&(h=g)});if(g.length){d.empty(),a(f).each(function(a,b){d[0].appendChild(b)}),a(g).each(function(a,b){e[0].appendChild(b)}),d.append(e),d.append("."),e.hide();var i=a('<a href="#" class="show-other-content" title="Show additional links"><span class="plus">+&nbsp;</span>others</a>');i.on("click",function(b){b.preventDefault(),a(this).remove(),e.show().focus()}),e.before(i),d.attr("aria-live","polite")}}),this}}(jQuery),function(a){a.fn.navHelper=function(b){var c=a(this),d=a.extend({sectionToggleClass:"section_toggle",breakpointSelector:window,breakpoints:[],appendTo:c},b),e="a:not(."+d.sectionToggleClass+")",f={},g=0;for(var h=0;h<d.breakpoints.length;h++)g=Math.max(g,d.breakpoints[h].width);var i=function(){c.find(e).not(f.exclude).toggle(),c.find(e).not(f.exclude).is(":visible")?c.addClass("expanded"):c.removeClass("expanded")},j=function(){if(a(d.breakpointSelector).width()>g)c.find(e).show(),c.find("a."+d.sectionToggleClass).hide();else for(var b=0;b<d.breakpoints.length;b++)a(d.breakpointSelector).width()<=d.breakpoints[b].width&&(f=d.breakpoints[b],f.label&&c.find("a."+d.sectionToggleClass).text(f.label).show(),c.find(e).not(f.exclude).hide(),c.find(f.exclude).show(),c.removeClass("expanded"))};return d.breakpoints.sort(function(a,b){return b.width-a.width}),a(d.breakpointSelector).resize(j),a(d.appendTo).append(a.a(d.collapsedLabel,{"class":d.sectionToggleClass})),c.find(e).addClass("nav_link"),c.find("a."+d.sectionToggleClass).click(function(){i()}),j(),a(this)}}(jQuery),function(a){a.fn.news_ticker=function(b){var b=b||{},c=a(this),d=b.source||"local",e=b.drop||!1,f=b.frequency||5e3,g=function(){var b=a(c).children("li");h(b)},h=function(b){var d=3,f=4e3;while(d--){f=f+Math.floor(Math.random()*6e3);var g=a(b[d]);a(b[d]).remove(),a(g).hide().prependTo(c).delay(f).slideDown("slow")}if(e){var d=newitems.length;while(d--)i()}},i=function(){a(c).children("li:last").remove()};return g(),a(this)}}(jQuery),jQuery(function(a){a("#notes_to_editors").addToggleLink(".notes_to_editors"),a("abbr.time_ago").timeago(),a("section.featured_items").equalHeightHelper({selectorsToResize:["h2 a","p.summary","div.image_summary"]}),a("section.article_group").equalHeightHelper({selectorsToResize:["article"]}),a("#featured-news-articles").equalHeightHelper({selectorsToResize:[".img img"]}),a(".floated_list").equalHeightHelper({selectorsToResize:["li"]}),a(".alphabetical-row").equalHeightHelper({selectorsToResize:["li"]}),a(".js-toggle-change-notes").toggler(),a(".js-hide-other-links").hideOtherLinks(),a(".js-nav-helper").each(function(){a(this).find(".inner ul").append(a.li("",".st"))}).navHelper({breakpoints:[{width:540,label:"All sections",exclude:".home, .current"},{width:850,label:"More sections",exclude:".home, .current, .primary"}],appendTo:".js-nav-helper .inner li.st"});var b=a(".inside_gov_home");b.length!=0&&a(".recently_updated").news_ticker(),a("section.featured_carousel").each(function(){a(this).addClass("slider"),a(this).find("article").addClass("slide"),a(this).wrap(a.div("",".slider_wrap")),a(".slider_wrap").carousel({slider:".slider",slide:".slide",addNav:!0,addPagination:!1,namespace:"carousel",speed:300})}),a(".document .body").enhanceYoutubeVideoLinks(),a(".detailed-guides-show").trackExternalLinks(),GOVUK.stickAtTopWhenScrolling.init(),GOVUK.backToContent.init(),a(".js-toggle-accessibility-warning").toggler({header:".toggler",content:".help-block"}),a(".js-document-filter").enableDocumentFilter(),a(".js-hide-extra-logos .organisations-icon-list .organisation").hideExtraRows({appendToParent:!0,showWrapper:a('<li class="show-other-content" />')}),a(".organisation_homepage #ministers .ministerial_role").hideExtraRows(),a(".organisation_homepage .management-secondary .board_member_role").hideExtraRows(),a(".organisation_homepage #military .military_role").hideExtraRows()}),function(a){var b=a(".js-search-filter"),c;b.length&&(c=a(".js-search-result"),b.find("a").click(function(d){var e=a(this),f=e.parent().data("filter"),g;d.preventDefault(),b.find(".active").removeClass("active"),e.addClass("active"),f==="*"?c.removeClass("hidden"):(g=c.filter("."+f).removeClass("hidden"),c.not(g).addClass("hidden"))}))}(jQuery),function(a){a.fn.splitIntoPages=function(b){var c=a(this),d=[];c.children(b).each(function(b,c){var e=a(c).nextUntil("h2"),f=a("<div></div>");f.addClass("page"),f.append(c),f.append(e),d.push(f)}),a(d).each(function(a,b){c.append(b)}),c.children().first()[0]!=c.children(".page").first()[0]&&c.children(".page").first().prepend(c.children().first(),c.children().first().nextUntil(".page"))}}(jQuery),function(){"use strict";var a=this,b=a.jQuery;typeof a.GOVUK=="undefined"&&(a.GOVUK={});var c={_hasScrolled:!1,_scrollTimeout:!1,init:function(){var a=b(".js-stick-at-top-when-scrolling");a.length>0&&(c.$els=a,c._scrollTimeout===!1&&(b(window).scroll(c.onScroll),c._scrollTimeout=window.setInterval(c.checkScroll,50)),b(window).resize(c.onResize))},onScroll:function(){c._hasScrolled=!0},checkScroll:function(){if(c._hasScrolled===!0){c._hasScrolled=!1;var a=b(window).scrollTop();c.$els.each(function(d,e){var f=b(e),g=f.data("scrolled-from");g&&a<g?c.release(f):b(window).width()>768&&a>=f.offset().top?c.stick(f):c.release(f)})}},stick:function(a){a.hasClass("content-fixed")||(a.data("scrolled-from",a.offset().top),a.before('<div class="shim" style="width: '+a.width()+"px; height: "+a.height()+'px">&nbsp;</div>'),a.css("width",a.width()+"px").addClass("content-fixed"))},release:function(a){a.hasClass("content-fixed")&&(a.data("scrolled-from",!1),a.removeClass("content-fixed").css("width",""),a.siblings(".shim").remove())}};a.GOVUK.stickAtTopWhenScrolling=c}.call(this),typeof window.GOVUK=="undefined"&&(window.GOVUK={}),typeof window.GOVUK.support=="undefined"&&(window.GOVUK.support={}),window.GOVUK.support.history=function(){return window.history&&window.history.pushState&&window.history.replaceState},function(a){a.fn.toggler=function(b){return b=a.extend({header:".toggle",content:".overlay"},b),this.each(function(c,d){function h(){e.toggleClass("open"),g.toggleClass("visuallyhidden")}var e=a(d),f=e.find(b.header),g=e.find(b.content);f.length>0&&g.length>0&&(f.attr("tabindex",0),e.addClass("toggleable"),g.addClass("visuallyhidden"),g.prepend('<span class="arrow"></span>'),f.keyup(function(a){a.which==13&&(a.preventDefault(),h())}),f.mouseup(function(a){a.preventDefault(),h()}))}),this}}(jQuery),function(a){var b=function(){a(this).find("a[rel='external']").each(function(){a(this).click(function(a){try{!a.metaKey&&!a.ctrlKey&&window._gat&&_gat&&_gat._getTrackerByName&&_gat._getTrackerByName()._trackEvent&&(a.preventDefault(),_gat._getTrackerByName()._trackEvent("Specialist-external-link",this.href),setTimeout("document.location = '"+this.href+"'",100))}catch(b){}})})};a.fn.extend({trackExternalLinks:b})}(jQuery),function(a,b,c){function j(a){return a=a||location.href,"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}"$:nomunge";var d="hashchange",e=document,f,g=a.event.special,h=e.documentMode,i="on"+d in b&&(h===c||h>7);a.fn[d]=function(a){return a?this.bind(d,a):this.trigger(d)},a.fn[d].delay=50,g[d]=a.extend(g[d],{setup:function(){if(i)return!1;a(f.start)},teardown:function(){if(i)return!1;a(f.stop)}}),f=function(){function n(){var c=j(),e=m(h);c!==h?(l(h=c,e),a(b).trigger(d)):e!==h&&(location.href=location.href.replace(/#.*/,"")+e),g=setTimeout(n,a.fn[d].delay)}var f={},g,h=j(),k=function(a){return a},l=k,m=k;return f.start=function(){g||n()},f.stop=function(){g&&clearTimeout(g),g=c},a.browser.msie&&!i&&function(){var b,c;f.start=function(){b||(c=a.fn[d].src,c=c&&c+j(),b=a('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){c||l(j()),n()}).attr("src",c||"javascript:0").insertAfter("body")[0].contentWindow,e.onpropertychange=function(){try{event.propertyName==="title"&&(b.document.title=e.title)}catch(a){}})},f.stop=k,m=function(){return j(b.location.href)},l=function(c,f){var g=b.document,h=a.fn[d].domain;c!==f&&(g.title=e.title,g.open(),h&&g.write('<script>document.domain="'+h+'"</script>'),g.close(),b.location.hash=c)}}(),f}()}(jQuery,this)